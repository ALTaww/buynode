import{a2 as c,a_ as d,bb as p,j as e,bc as a,bd as i}from"./CZwgHzzz.js";const n=({uuid:t})=>{const{$axios:r}=c();return r.get(`cart/orders?uuid=${t}`)},f=(t,r)=>{const{$axios:s}=c();return s.post(`cart/order/${t}/${r}`,{payment_redirect_url:"https://kupikod.com/shop/cart"},{headers:{utm_source:"shop"}})},C=t=>{const{$axios:r}=c();return r.post("/cart-calculate",{products:t})},P=174,g=175,h=176,_=d("productStore",{state:()=>({productGroups:[],productGroupsPage:1,productGroupsPerPage:20,products:[],topProducts:[],preorders:[],newProducts:[],productsPage:1,mainCategories:[]}),actions:{async fetchProductGroups(t={}){const{data:r}=await p({page:this.productGroupsPage,per_page:this.productGroupsPerPage,...t});return this.productGroups=r.data,this.productGroupsPage=r.meta.current_page,this.productGroupsPerPage=r.meta.per_page,{data:r}},async fetchCheckoutCart(t){let{data:r}=await n({uuid:t});return{checkoutCart:r.data}},async fetchProducts(t={}){const{data:r}=await e({page:this.productsPage,per_page:this.getProductsPerPage,...t});this.products=r.data.filter(({slug:s})=>!a.includes(s))},async fetchProductsForMainPage(){this.fetchProducts(),o([P],t=>{this.topProducts=t}),o([h],t=>{this.preorders=t}),o([g],t=>{this.newProducts=t})},async fetchMainCategories(){const{data:t}=await i();this.mainCategories=t},async loadMore(t){if(t==="groups"){this.productGroupsPage++;const{data:r}=await this.fetchProductGroups();this.productGroups=this.productGroups.concat(r.data)}if(t==="products"){this.productsPage++;const{data:r}=await e({page:this.productsPage,per_page:this.getProductsPerPage});this.products=[...this.products,...r.data].filter(({slug:s})=>!a.includes(s))}}},getters:{getProductGroups:t=>t.productGroups,getProducts:t=>t.products,getProductsForMainPage:t=>({products:t.products,preorders:t.preorders,newProducts:t.newProducts,topProducts:t.topProducts}),getMainCategories:t=>t.mainCategories,getProductsPerPage:()=>window.innerWidth>1280?24:20}});function o(t,r){return e({tagIds:t}).then(({data:s})=>{r(s.data.filter(({slug:u})=>!a.includes(u)))})}export{f as b,C as c,_ as u};
