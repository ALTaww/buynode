import{a2 as P,b5 as l,aa as C,_ as B}from"./CZwgHzzz.js";import{b as m,j as O,t as M,ab as E,am as S,c as V,B as D,u as j,a as H,g as N,M as R,N as z,aj as I}from"./QxlODfZ-.js";const K=s=>s==="defer"||s===!1;function Q(...s){var y;const n=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(n);let[t,u,a={}]=s;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof u!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const e=P(),b=u,g=()=>l.value,x=()=>e.isHydrating?e.payload.data[t]:e.static.data[t];a.server=a.server??!0,a.default=a.default??g,a.getCachedData=a.getCachedData??x,a.lazy=a.lazy??!1,a.immediate=a.immediate??!0,a.deep=a.deep??l.deep,a.dedupe=a.dedupe??"cancel";const f=a.getCachedData(t,e),v=f!=null;if(!e._asyncData[t]||!a.immediate){(y=e.payload._errors)[t]??(y[t]=l.errorValue);const i=a.deep?m:O;e._asyncData[t]={data:i(v?f:a.default()),pending:m(!v),error:M(e.payload._errors,t),status:m("idle"),_default:a.default}}const r={...e._asyncData[t]};delete r._default,r.refresh=r.execute=(i={})=>{if(e._asyncDataPromises[t]){if(K(i.dedupe??a.dedupe))return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if(i._initial||e.isHydrating&&i._initial!==!1){const c=i._initial?f:a.getCachedData(t,e);if(c!=null)return Promise.resolve(c)}r.pending.value=!0,r.status.value="pending";const d=new Promise((c,o)=>{try{c(b(e))}catch(_){o(_)}}).then(async c=>{if(d.cancelled)return e._asyncDataPromises[t];let o=c;a.transform&&(o=await a.transform(c)),a.pick&&(o=F(o,a.pick)),e.payload.data[t]=o,r.data.value=o,r.error.value=l.errorValue,r.status.value="success"}).catch(c=>{if(d.cancelled)return e._asyncDataPromises[t];r.error.value=C(c),r.data.value=j(a.default()),r.status.value="error"}).finally(()=>{d.cancelled||(r.pending.value=!1,delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=d,e._asyncDataPromises[t]},r.clear=()=>T(e,t);const p=()=>r.refresh({_initial:!0}),w=a.server!==!1&&e.payload.serverRendered;{const i=H();if(i&&!i._nuxtOnBeforeMountCbs){i._nuxtOnBeforeMountCbs=[];const o=i._nuxtOnBeforeMountCbs;E(()=>{o.forEach(_=>{_()}),o.splice(0,o.length)}),S(()=>o.splice(0,o.length))}w&&e.isHydrating&&(r.error.value||f!=null)?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):i&&(e.payload.serverRendered&&e.isHydrating||a.lazy)&&a.immediate?i._nuxtOnBeforeMountCbs.push(p):a.immediate&&p();const d=N();if(a.watch){const o=V(a.watch,()=>r.refresh());d&&D(o)}const c=e.hook("app:data:refresh",async o=>{(!o||o.includes(t))&&await r.refresh()});d&&D(c)}const h=Promise.resolve(e._asyncDataPromises[t]).then(()=>r);return Object.assign(h,r),h}function T(s,n){n in s.payload.data&&(s.payload.data[n]=void 0),n in s.payload._errors&&(s.payload._errors[n]=l.errorValue),s._asyncData[n]&&(s._asyncData[n].data.value=void 0,s._asyncData[n].error.value=l.errorValue,s._asyncData[n].pending.value=!1,s._asyncData[n].status.value="idle"),n in s._asyncDataPromises&&(s._asyncDataPromises[n]&&(s._asyncDataPromises[n].cancelled=!0),s._asyncDataPromises[n]=void 0)}function F(s,n){const t={};for(const u of n)t[u]=s[u];return t}const U={},q={class:"max-w-[240px]"};function G(s,n){return R(),z("div",q,n[0]||(n[0]=[I('<div class="skeleton !rounded-[16px] w-[240px] h-[360px] md:w-]196px] md:h-[294px] sm:w-[174px] sm:h=[244px] xs:w-[200px] xs:h-[300px]" data-v-a78d6b0b></div><div class="mt-4 skeleton !rounded-[50px] w-[180px] h-5" data-v-a78d6b0b></div><div class="mt-2 !rounded-[50px] skeleton w-full h-4" data-v-a78d6b0b></div><div class="mt-1 !rounded-[50px] skeleton w-full h-4" data-v-a78d6b0b></div><div class="mt-2 skeleton rounded-[50px] w-[120px] h-[14px]" data-v-a78d6b0b></div>',5)]))}const W=B(U,[["render",G],["__scopeId","data-v-a78d6b0b"]]);export{W as _,Q as u};
