import{_ as V,b4 as ee,a$ as te,c as J,m as se,b6 as ne,b7 as oe,b8 as re,b9 as ae}from"./CZwgHzzz.js";import{M as r,N as a,R as F,P as S,T as ie,l as c,u as s,k as de,b as I,r as le,D as ce,H as G,J as x,V as b,O as o,Q as y,W as m,a0 as T,S as Q,U as R,L as ue,ao as pe,ap as _e,aq as me,ar as fe,an as ge}from"./QxlODfZ-.js";const he={key:1,class:"skeleton-shine"},ve={__name:"SkeletonWrapper",props:{loading:{type:Boolean,default:!1},width:{type:String,default:"100%"},height:{type:String,default:"100%"},full:{type:Boolean,default:!1}},setup(e){return(l,i)=>(r(),a("div",{class:S(["skeleton-wrap",{"skeleton-wrap--active":e.loading,"pt-1.5 pb-0.5":!e.full}]),style:ie(`width: ${e.width}; height: ${e.height}`)},[e.loading?(r(),a("div",he)):F(l.$slots,"default",{key:0},void 0,!0)],6))}},we=V(ve,[["__scopeId","data-v-db69084f"]]);function k(e){if(typeof e=="string")return e.replace(/\B(?=(\d{3})+(?!\d))/g," ");if(typeof e=="number")return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}const ye=e=>{const l=c(()=>{const{old_price:n,price:f}=s(e);return n&&f?100-+(f/n*100).toFixed(0):null}),i=c(()=>{const{price_in_gold:n}=s(e);return n?k(Math.round(n)):null}),p=c(()=>{const{price:n}=s(e);return i.value?i.value:k(Math.round(n))}),_=c(()=>{const{old_price:n}=s(e);return n?k(Math.round(n)):null}),d=c(()=>{const{price:n}=s(e);return n?k(Math.round(n)):null});return{discountValue:l,priceInGold:i,firstPrice:p,secondPrice:_,currencyPrice:d}},be=["src"],ke={key:0,class:"product-card__tags--top"},Se={class:"product-card__tag"},xe=["src"],Be={key:1,class:"product-card__tags--bottom"},$e={class:"product-card__tag-bottom"},Ce=["src","alt"],Pe={class:"product-card__prices prices"},Me={key:0,class:"prices__discount"},Le={class:"prices__price flex items-center"},Ne={key:2,class:"prices__currency-price"},Ge={class:"product-card__name"},Ie={class:"product-card__sub-name"},Te={key:0},Fe={key:0},Ve={key:1},Ae={key:1,class:"product-card__more more-card"},je=de({__name:"index",props:{product:{},stretchable:{}},setup(e){const l=I(!1),{discountValue:i,priceInGold:p,secondPrice:_,currencyPrice:d}=ye(e.product),n=c(()=>+p==+_);c(()=>"rub"),ee();const f=I(!1);le({top:c(()=>{var t;return(t=e.product.tags)==null?void 0:t.filter(({position:u})=>u==="top")}),bottom:c(()=>{var t;return(t=e.product.tags)==null?void 0:t.filter(({position:u})=>u==="bottom")})}),ce(()=>{f.value=!!te("access_token")});const v=c(()=>{var t;return((t=e.product)==null?void 0:t.more)||`/${e.product.slug??""}`}),g=c({get:()=>e.product.tags.find(({ru_name:t})=>t===e.product.external_data.platform),set:()=>null});return(t,u)=>{var j,q,E;const B=J,X=se,A=we;return r(),a("div",{class:S(["product-card",{"product-card--stretchable":t.stretchable}])},[(j=t.product)!=null&&j.more?(r(),a("div",Ae,[(r(),a(G,null,Q(6,w=>o("div",{class:"more-card__backdrop-item",key:w})),64)),u[0]||(u[0]=o("button",{class:"more-card__btn"},"Больше →",-1))])):(r(),a(G,{key:0},[x(B,{class:S(["product-card__img",{"product-card__img__liked":s(l)}]),to:s(v)},{default:b(()=>{var w,$,C,P,M,L,N;return[o("img",{src:(w=t.product)==null?void 0:w.picture_url,alt:""},null,8,be),($=t.product.tags.find(h=>h.ru_name===t.product.external_data.region))!=null&&$.image?(r(),a("div",ke,[o("div",Se,[o("img",{src:(C=t.product.tags.find(h=>h.ru_name===t.product.external_data.region))==null?void 0:C.image},null,8,xe)])])):y("",!0),(P=t.product.tags.find(h=>h.ru_name===t.product.external_data.platform))!=null&&P.image?(r(),a("div",Be,[o("div",$e,[o("img",{src:(M=s(g))==null?void 0:M.image,alt:`Иконка ${(L=s(g))==null?void 0:L.en_name}.`},null,8,Ce),o("span",null,m((N=s(g))==null?void 0:N.en_name),1)])])):y("",!0)]}),_:1},8,["class","to"]),o("div",Pe,[x(A,{width:"45%",class:"flex items-end gap-1",loading:(q=t.product)==null?void 0:q.loading},{default:b(()=>[s(i)&&Number.isFinite(s(i))?(r(),a("div",Me," -"+m(s(i))+"% ",1)):y("",!0),o("div",Le,[s(p)?(r(),a(G,{key:0},[T(m(s(p))+" ",1),x(X,{class:"w-[16px] h-[16px] ml-[2px] mb-[1px]"})],64)):(r(),a(G,{key:1},[T(m(s(k)(t.product.price))+" ₽ ",1)],64))]),s(_)&&!s(n)?(r(),a("div",{key:1,class:S(["prices__second-price",{"prices__second-price--old":s(i)}])},m(s(k)(s(_)))+" ₽ ",3)):s(d)?(r(),a("div",Ne,m(s(k)(s(d)))+" ₽ ",1)):y("",!0)]),_:1},8,["loading"])]),x(A,{width:"80%",loading:(E=t.product)==null?void 0:E.loading},{default:b(()=>[x(B,{to:s(v)},{default:b(()=>{var w,$,C,P,M,L,N,h,O,W,D,z,K;return[o("div",Ge,m((w=t.product)==null?void 0:w.name),1),o("div",Ie,[T(m((P=(C=($=t.product)==null?void 0:$.external_data)==null?void 0:C.product_details)==null?void 0:P.value)+" ",1),((N=(L=(M=t.product)==null?void 0:M.external_data)==null?void 0:L.product_details)==null?void 0:N.title)=="Номинал"?(r(),a("span",Te,[((W=(O=(h=t.product)==null?void 0:h.external_data)==null?void 0:O.product_details)==null?void 0:W.currency)=="RUB"?(r(),a("span",Fe,"₽")):(r(),a("span",Ve,m((K=(z=(D=t.product)==null?void 0:D.external_data)==null?void 0:z.product_details)==null?void 0:K.currency),1))])):y("",!0)])]}),_:1},8,["to"])]),_:1},8,["loading"])],64))],2)}}}),ct=V(je,[["__scopeId","data-v-cbd05f81"]]);function qe(e,l){for(var i=-1,p=e==null?0:e.length,_=Array(p);++i<p;)_[i]=l(e[i],i,e);return _}var Ee=qe,U=ne,Oe=Ee,We=oe,De=re,ze=1/0,Z=U?U.prototype:void 0,H=Z?Z.toString:void 0;function Y(e){if(typeof e=="string")return e;if(We(e))return Oe(e,Y)+"";if(De(e))return H?H.call(e):"";var l=e+"";return l=="0"&&1/e==-ze?"-0":l}var Ke=Y,Re=Ke;function Ue(e){return e==null?"":Re(e)}var Ze=Ue,He=Ze,Je=0;function Qe(e){var l=++Je;return He(e)+l}var Ye=Qe;const Xe=ae(Ye),et={class:"card-list"},tt={class:"card-list__header"},st={class:"card-list__title"},nt={class:"card-list__title-wrapper"},ot={key:1,class:"cart-list__title xs:mb-6 lg:mb-9"},rt={key:2,class:"card-list__controls"},at={key:3,class:"card-list__controls items-center xs:hidden sm:flex !xs:mb-6 !lg:mb-9"},it={__name:"index",props:{link:{default:!1},filter:{type:Object,default:{}},title:{type:String||Boolean,default:!1},items:{type:Array||Boolean,default:!1},loading:{type:Boolean,default:!1},hideControl:{type:Boolean,default:!1},spaceBetween:{type:Object,default:()=>({1920:24,1440:16,768:12,360:12})},slidesPerGroup:{type:Object,default:()=>({1920:6,1440:6,768:4,360:1})}},setup(e){const l=I(e.items),i=Xe("swiper"),p=c(()=>{var d,n,f,v,g,t,u,B;return{1920:{spaceBetween:((d=e.spaceBetween)==null?void 0:d[1920])||24,slidesPerGroup:((n=e.slidesPerGroup)==null?void 0:n[1920])||6},1440:{spaceBetween:((f=e.spaceBetween)==null?void 0:f[1440])||16,slidesPerGroup:((v=e.slidesPerGroup)==null?void 0:v[1440])||6},768:{spaceBetween:((g=e.spaceBetween)==null?void 0:g[768])||12,slidesPerGroup:((t=e.slidesPerGroup)==null?void 0:t[768])||4},360:{spaceBetween:((u=e.spaceBetween)==null?void 0:u[360])||12,slidesPerGroup:((B=e.slidesPerGroup)==null?void 0:B[360])||1}}}),_=I({nextEl:`.${"contr-next"+i}`,prevEl:`.${"contr-pre"+i}`});return(d,n)=>{const f=J,v=fe,g=ge;return r(),a("div",et,[o("div",tt,[e.title&&!e.loading?(r(),R(f,{key:0,class:S(["card-list__link",{"pointer-events-none":!e.link}]),to:e.link},{default:b(()=>[o("h2",st,[F(d.$slots,"tag",{},void 0,!0),o("span",nt,m(e.title),1)])]),_:3},8,["to","class"])):(r(),a("div",ot,n[0]||(n[0]=[o("div",{class:"md:w-[720px] xs:w-[320px] md:h-8 xs:h-[29px] rounded-[64px] bg-[#212227]"},null,-1)]))),!e.hideControl&&!e.loading?(r(),a("div",rt,[o("button",{class:S(["contr-pre"+s(i),"card-list__control swiper-my-button-prev"])},n[1]||(n[1]=[o("svg",{width:"17",height:"23",viewBox:"0 0 17 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M6.68357 11.0039L10.9562 16.1921C11.3182 16.6318 11.2553 17.2817 10.8157 17.6437C10.3761 18.0058 9.72614 17.9429 9.36408 17.5032L4.55158 11.6595C4.23798 11.2787 4.23798 10.7292 4.55158 10.3484L9.36408 4.50461C9.72614 4.06496 10.3761 4.00207 10.8157 4.36413C11.2553 4.72619 11.3182 5.37611 10.9562 5.81576L6.68357 11.0039Z",fill:"white"})],-1)]),2),o("button",{class:S(["contr-next"+s(i),"card-list__control swiper-my-button-next"])},n[2]||(n[2]=[o("svg",{width:"16",height:"22",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M9.32034 11L5.04773 5.8118C4.68566 5.37215 4.74856 4.72224 5.18821 4.36018C5.62785 3.99811 6.27777 4.06101 6.63983 4.50066L11.4523 10.3444C11.7659 10.7252 11.7659 11.2748 11.4523 11.6555L6.63983 17.4993C6.27777 17.9389 5.62785 18.0018 5.18821 17.6398C4.74856 17.2777 4.68566 16.6278 5.04773 16.1881L9.32034 11Z",fill:"white"})],-1)]),2)])):y("",!0),!e.hideControl&&e.loading?(r(),a("div",at,n[3]||(n[3]=[o("div",{class:"w-10 h-10 rounded-full bg-[#212227]"},null,-1),o("div",{class:"w-10 h-10 rounded-full bg-[#212227]"},null,-1)]))):y("",!0)]),x(g,{breakpoints:s(p),"slides-per-view":"auto",modules:["SwiperMousewheel"in d?d.SwiperMousewheel:s(pe),"SwiperFreeMode"in d?d.SwiperFreeMode:s(_e),"SwiperNavigation"in d?d.SwiperNavigation:s(me)],navigation:s(_),freeMode:{enabled:!0},mousewheel:{forceToAxis:!0}},{default:b(()=>[(r(!0),a(G,null,Q(s(l),(t,u)=>(r(),R(v,{class:"card-list__slide",key:u+(t.loading??"loaded")},{default:b(()=>[F(d.$slots,"default",ue({ref_for:!0},t),void 0,!0)]),_:2},1024))),128))]),_:3},8,["breakpoints","modules","navigation"])])}}},ut=V(it,[["__scopeId","data-v-a97fae8c"]]);export{ct as _,ut as a,k as g,ye as u};
